%\RequirePackage{docswitch}
%% \flag is set by the user, through the makefile:
%%    make note
%%    make apj
%% etc.
%\setjournal{\flag}
%
%\documentclass[\docopts]{\docclass}
%
%% You could also define the document class directly
%%\documentclass[]{emulateapj}
%
%% Custom commands from LSST DESC, see texmf/styles/lsstdesc_macros.sty
%\usepackage{lsstdesc_macros}

\documentclass[iop,twocolumn]{emulateapj} 
%\documentclass{article}
\usepackage{color}
\usepackage{natbib}
\usepackage{subfigure}
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage{bm}              % boldface math
\usepackage[amssymb]{SIunits}
\usepackage{multirow}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{float}
\usepackage[outercaption]{sidecap} 
\usepackage{threeparttable}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage[version=4]{mhchem}

%definitions
\newcommand{\code}[1]{\texttt{#1}}
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\newcommand{\rtwo}{\frac{1}{\sqrt{2}}}
\newcommand{\rtd}{\frac{\delta^+}{\sqrt{2}}}
\newcommand{\rtc}{\frac{\delta^-}{\sqrt{2}}}
\newcommand{\I}{\tilde I}
\newcommand{\Q}{\tilde Q}

\newcommand{\U}{\tilde U}
\newcommand{\V}{\tilde V}
\newcommand{\J}{{\tilde E}}
\renewcommand{\vec}[1]{{\bf #1}}

\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{9} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{9}  % for normal
\newcommand{\map}{{\sl WMAP}}
\newcommand{\planck}{{\it Planck}}
\newcommand{\wmap}{{\it WMAP}}
\newcommand{\cobe}{{\sl COBE}}
\newcommand{\ba}{\begin{eqnarray}}
\newcommand{\ea}{\end{eqnarray}}
\newcommand{\n}      {{\bf{n}}}
\newcommand{\EV}[1]  {\langle#1\rangle}
\newcommand{\lmax}   {l_{\rm max}}
\newcommand{\mmax}   {m_{\rm max}}
\newcommand{\uKsq}   {\mbox{$\mu{\rm K}^2$}}
\newcommand{\uKrs}   {\mbox{$\mu{\rm K}\sqrt{\rm s}$}}
\newcommand{\dg}     {\mbox{$^{\circ}$}}
\newcommand{\lsim}   {\mbox{$_<\atop^{\sim}$}}
\newcommand{\gsim}   {\mbox{$_>\atop^{\sim}$}}
\newcommand{\lt}     {\mbox{$<$}}
\newcommand{\gt}     {\mbox{$>$}}
\newcommand{\order}  {{\cal O}}
\newcommand{\JJ}     {{\cal J}}
\newcommand{\<}      {\langle}
\renewcommand{\>}    {\rangle}
\newcommand{\amin}   {\mbox{$^\prime\ $}}
\newcommand{\asec}   {\mbox{$^{\prime\prime}\ $}}
\newcommand{\ddeg}   {\mbox{${\rlap.}^\circ$}}

\newcommand{\ylm}[2] {{Y_{#1#2}}}
\newcommand{\ylmcc}[2]{{Y^{*}_{#1#2}}}
\newcommand{\fnlKS}  {f_{NL}^{\rm local}}
\newcommand{\fnleq}  {f_{NL}^{\rm equil}}

\newcommand  \cm     {{\rm \,cm}}
\newcommand  \gtsim  {\lower.5ex\hbox{$\; \buildrel > \over \sim \;$}}
\newcommand  \ltsim  {\lower.5ex\hbox{$\; \buildrel < \over \sim \;$}}
\newcommand{\lap} {$\stackrel{<}{_\sim}$}
\newcommand{\gap} {$\stackrel{>}{_\sim}$}

\newcommand{\LCDM}   {$\Lambda$CDM}
\newcommand{\etal}   {{\it et.al.}}

% --Equations
\newcommand{\be}{\begin{equation}}
\newcommand{\ee}{\end{equation}}
\newcommand{\mat}[1]{\ensuremath{\mathbf #1}}
\newcommand{\neff}  {$N_{\rm eff}$}
\newcommand{\mnu} {\Sigma m_\nu}

\def\taua{\mbox{Tau A}}

\newcommand{\iras}{{\sl IRAS}}
\newcommand{\firas}{{\sl FIRAS}}
\newcommand{\cobedirbe}{{\sl COBE/DIRBE}}
\newcommand{\cobedmr}{{\sl COBE/DMR}}
\newcommand{\cobefiras}{{\sl COBE/FIRAS}}
\newcommand{\so}{SO}
\newcommand{\sa}{Simons Array}
\newcommand{\pbear}{\textsc{Polarbear}}
\newcommand{\pb}{\textsc{Polarbear}}
\newcommand{\Pb}{\textsc{Polarbear}}
\newcommand{\polarbear}{\textsc{Polarbear}}
\newcommand{\act}{ACT}
\newcommand{\mrvol}[1]{\textcolor{blue}{In charge: #1}}
\newcommand{\todo}[1]{{\bf TODO: #1}}

\bibpunct{(}{)}{;}{a}{}{,}
\usepackage{graphicx}
\graphicspath{{./}{./figures/}}
\bibliographystyle{apj}

% Add your own macros here:
%\include{plasticc_macros}
\include{authors}


%\author{Rick Kessler, Rahul Biswas, Alex Boucard, Mi Dai, Renee Hlozek,
%Saurabh W.~Jha, Lluis Galbany, Emille Ishida, Ashish Mahabal, Kaisey Mandel, Rafael Martinez-Galarza, Daniel Mutukrishna, Tina Peters, Kara Ponder}

% ======================================================================

\begin{document}

\title{The Photometric LSST Astronomical Time-series Classification Challenge ({\plasticc}): Data set}

%\maketitlepre

\begin{abstract}
The Photometric LSST Astronomical Time Series Classification Challenge ({\plasticc}) is an open data challenge to classify simulated astronomical time series data in preparation for the data from the Large Synoptic Survey Telescope (LSST), that will achieve first light in 2022. We briefly describe the {\plasticc} data set that will be tested by the Kaggle team. This note will be updated for the full release of the data to the community.

\end{abstract}

% Keywords are ignored in the LSST DESC Note style:
%\dockeys{}

\maketitlepost

% ----------------------------------------------------------------------
% {% raw %}
\input{introstuff}
\section{The data}
\label{sec:thedata}

The light curve data for each object consists 
of a time series of fluxes in six filters (ugrizY), 
with non-uniform  time sampling.
The {\plasticc} data is provided in the form of a HDF5 file, which has two kinds of information. The first
is a table listing each astronomical source in the data indexed by a unique identifier 'objid' which is a string. Each row of the table lists the properties of the source as follows: 
\begin{itemize}
\item {\tt objid}: the Object ID, unique identifier, string
\item {\tt ra}: right ascension, sky coordinate: co-longitude, units are degrees
\item {\tt decl}: declination, sky coordinate: co-latitude, units are degrees
\item {\tt mwebv}: a property of the Milky Way dust along the line of sight to the astronomical source, and is thus a function of the sky coordinates of the source {\tt ra, decl}. This is used  to determine a {\passband} dependent dimming and redenning of light from astronomical sources as described in subsection~\ref{subsec:observmethods}.
\item {\specz}: the spectroscopic redshift of the source. This is an extremely accurate measure of redshift, 
    and is not measured for the test sample. Hence, these values are null in the test data.
\item {\hostphotoz} : The photometric redshift of the host galaxy of the astronomical source. While this is meant to be a proxy for {\specz}, there can be large differences between the two and should be regarded as a far less accurate version of {\specz}. 
\item {\hostphotozerr} : The uncertainty on the {\hostphotoz}
\item {\class} : The class of the astronomical source as a string. (currently this variable is called `sntype' and will be changed in future)
\end{itemize}

The second table of information about the transients is its brightness as a function of time in different {\passband}s, ie. light curve data. Each row of this table corresponds to an observation of the source at a particular time and passand.  This table includes the following information
\begin{itemize}
\item {\tt mjd}: the time (float) in Modified Julian Date (MJD) of the observation with a unit of day.
\item {\passband} : The specific LSST {\passband} string: u, g, r, i, z, Y in which it was viewed. 
\item {\tt flux}: the measured flux (brightness) in the {\passband} of observation as listed in the {\passband} column. This is a float.
\item {\tt fluxerr}: the uncertainty on the measurement of the {\tt flux}  listed above.
\item {\tt photflag}: ignore.
\end{itemize}

A few caveats about the light curve data are as follows:
\begin{itemize}
    \item \textbf{Negative Flux} Due to statistical fluctuations and the way the brightness is estimated, the flux may be negative for dim sources, where the true flux is close to zero. 
    \item \textbf{saturated observations} The light curves include `saturated' observations of sources, where the source is
too bright to obtain a measured value. In such cases, the {\tt flux} is set to 0., and the {\tt fluxerr} is set to 10,000,000. Such an observation may not yield a value of {\tt flux}, but it indicates that the source was extremely bright rather than extremely dim at the time of observation. 
\item \textbf{Observing Cadences} The objid string has two prefixes `DDF’ and `WFD’.  DDF corresponds to
“Deep Drill Fields” over a small area of sky, but with very high quality 
light curves. WFD corresponds to “wide-fast-deep” over a very large 
sky area, but with lower quality light curves.

\end{itemize}

\clearpage
%It is possible that the distribution of properties (as found in the header table) could be different for different classes of astrophysical sources. For example, sources that are extremely dim, may only be found in our own galaxy the Milky Way, and thus their redshifts will be close to zero, and their locations are likely to be clustered around the parts of the sky where the Milky Way is densely populated. Sources that are somewhat brighter, but still too dim to be see from large cosmological distances may be found at low redshifts only. On the other hand, extremely bright sources which are visible for extremely large distances may tend to be found at higher redshifts due to larger physical volume at high redshifts. On the other hand, the signature of a particular class of astrophysical source is to be found in its light curve, which is a degraded and compressed version of its spectral evolution. 

\subsection{Obtaining the data and Scoring a classification}
The header table is located in the sample HDF5 file at the path {\header}, while the light curve is stored at the path `objid' in the sample HDF5 file. As part of the challenge, we provide an example Jupyter notebook to read in the data from an HDF5 file, and a notebook to compute the metrics for the challenge.

\subsection{Training And Test Data}
The training data follow the description above and have the properties and light curves of a set of {\numObjectsTraining} astronomical sources and are meant to represent the brighter objects for which obtaining expensive spectroscopy is possible. The test data represent all of the data which have no spectroscopy.
Therefore, the test data has `NULL' entries for the two columns {\specz} and {\class}. Moreover, for this reason their properties are \textbf{non-representative} of distributions of the
the test data set. The training data are mostly comprised of nearby, low redshift, brighter samples while the test data contain higher redshift, fainter and more distant objects. Therefore, there are objects in the test data that do not have counterparts in the training data.


% ----------------------------------------------------------------------

\section{Challenge participation}
\label{sec:conclusion}
{\plasticc} challenge entries are required to classify each of the sources in the header file of the test data set  based on their properties and light curves. The classification must be done though the assignment of probabilities $P_{ij},$ 
%$P(\rm{class}\vert\rm{data}_{i}, \rm{training-data}, \rm{knowledge}),$ 
the probability that the $i\rm{th}$ source in the test data is a member of the class $j$ based on the combination of properties and light curve data for the object, the training data set, and any outside knowledge the participant may have acquired elsewhere. To specify the entry for a single source, the participant must provide the probabilities of that source belonging to each of the mutually exclusive (non-overlapping) `{{\numclasses}}  classes in the training set, and of not belonging to any of the classes in the training set and therefore denoted by the {\tt others} class. High values of $P_{ij}$ for a particular class $j$ and object $i$ indicate that the participant believes that the ith source is likely to be a member of the $j$th class. 
As true probabilities, the quantities $P_{ij}$ must satisfy the following criteria:
\begin{eqnarray*}
0.0 \leq P_{ij} \leq 1.0 \qquad \forall i, j \nonumber \\
\sum_{j} P_{ij} = 1.0 \qquad \forall i
\nonumber
\end{eqnarray*}
For a {\plasticc} entry to be valid, it must have these probabilities for each class and astronomical source, ie. an entry cannot leave out probabilities on any source, or class. To win the challenge, the entry must be a valid entry and minimise the {\plasticc} metric score (which is described in a separate note included in this challenge). 
For a participant using a classifier which decides that an object is of a particular class rather than provide probabilities, the participant has to use their own prescription to define probabilities. For example, a source classified as the first class may be given a probability of 1.0 and all other classes probabilities of 0.0, or the first class may be assigned 0.9 and all other classes may be given uniform probabilities so that the probabilities sum to unity. 

For example, if the challenge was to classify a set of 3 observations into two classes of `star' or `galaxy' classes (and an `other' class), the returned classification table would be $3x3$ matrix:

\begin{table}[htbp!]
\begin{center}
\begin{tabular}{|c|c|c|c|}
Object ID & $P(star)$ & $P(galaxy)$ & $P(other)$ \\
\hline
1 & 0.6 & 0.3 & 0.1\\
2 & 0.3 & 0.3 & 0.4\\
3 & 0.55 & 0.4 & 0.05\\
\end{tabular}
\caption{An example classification table for a challenge to classify 3 objects into 3 classes}
\end{center}
\end{table}

The {\plasticc} team involved in validating the data will not be able to participate in the challenge directly, and will only publish classifications on the data once the challenge has completed. Some {\plasticc} team members involved in defining metrics will participate in the challenge, but they have not seen any {\plasticc} information about the models or the data.

% ----------------------------------------------------------------------

\subsection{Acknowledgments}
The {\plasticc} data relies on numerous members of the astronomical community to provide models of astronomical transients and variables. These models will be described in a paper to be published once the challenge is complete. While we cannot thank them by name at this stage (as this could identify the models included in the challenge), we acknowledge their contributions anonymously at this stage. This work was supported by an LSST Corporation Enabling Science grant, and a Dark Energy Science Collaboration Workshop support grant.

%%% Here is where you should add your specific acknowledgments, remembering that some standard thanks will be added via the \code{desc-tex/ack/*.tex} and \code{contributions.tex} files.

%This paper has undergone internal review in the LSST Dark Energy Science Collaboration. % REQUIRED if true

%\input{contributions} % Standard papers only: author contribution statements. For examples, see http://blogs.nature.com/nautilus/2007/11/post_12.html

% This work used TBD kindly provided by Not-A-DESC Member and benefitted from comments by Another Non-DESC person.

% Standard papers only: A.B.C. acknowledges support from grant 1234 from ...

\input{desc-tex/ack/standard} % also available: key standard_short

% This work used some telescope which is operated/funded by some agency or consortium or foundation ...

% We acknowledge the use of An-External-Tool-like-NED-or-ADS.

%{\it Facilities:} \facility{LSST}

% Include both collaboration papers and external citations:
%\bibliography{main,lsstdesc}

\end{document}

% ======================================================================
